{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://todo/./src/constants.js","webpack://todo/./src/listeners.js","webpack://todo/./src/render.js","webpack://todo/./src/services.js","webpack://todo/./src/state.js","webpack://todo/webpack/bootstrap","webpack://todo/webpack/runtime/define property getters","webpack://todo/webpack/runtime/hasOwnProperty shorthand","webpack://todo/webpack/runtime/make namespace object","webpack://todo/./src/todos.js"],"sourcesContent":["// Constants benefits\n// - reduces risk of typos (IDE can code-complete)\n// - easier to confirm it is correct (easier to check properties than strings)\n// - If a value changes, you can change it in one place and the rest of the code can continue to use the constant\n\n// Might be SERVER_CODES and CLIENT_CODES if we had more and different constants\nexport const SERVER = {\n  AUTH_MISSING: 'auth-missing',\n  AUTH_INSUFFICIENT: 'auth-insufficient',\n  REQUIRED_USERNAME: 'required-username',\n  REQUIRED_TASK: 'required-task',\n  TASK_MISSING: 'noSuchId', // Someone was inconsistent!\n};\n\nexport const CLIENT = {\n  NETWORK_ERROR: 'networkError',\n  NO_SESSION: 'noSession',\n};\n\nexport const MESSAGES = {\n  // The [] below uses the variable value as the key\n  [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network.  Please try again',\n  // Here we use 'dog' to simulate a bad password\n  [SERVER.AUTH_INSUFFICIENT]: 'Your username/password combination does not match any records, please try again.',\n  [SERVER.REQUIRED_USERNAME]: 'Please enter a valid (letters and/or numbers) username',\n  [SERVER.REQUIRED_TASK]: 'Please enter the task to do',\n  default: 'Something went wrong.  Please try again',\n};\n","import {\n  fetchLogin,\n  fetchLogout,\n  fetchTodos,\n  fetchUpdateTodo,\n  fetchAddTodo,\n  fetchDeleteTodo,\n} from './services';\nimport {\n  waitOnTodos,\n  setTodos,\n  setError,\n  login,\n  logout,\n  updateTodo,\n  addTodo,\n} from './state';\nimport render from './render';\n\nexport function addAbilityToLogin({ state,  appEl }) {\n  // Using 'submit' so we can get both submit via button-click and by \"enter\"\n  appEl.addEventListener('submit', (e) => {\n    e.preventDefault();\n    if(!e.target.classList.contains('login__form')) {\n      return;\n    }\n\n    const username = appEl.querySelector('.login__username').value;\n    waitOnTodos();\n    render({ state, appEl }); // show loading state\n    fetchLogin( username )\n    .then( todos => {\n      login(username);\n      setTodos(todos);\n      render({ state, appEl });\n    })\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n\n  });\n}\n\nexport function addAbilityToLogout({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('controls__logout')) {\n      return;\n    }\n    logout();\n    render({ state, appEl });\n    fetchLogout() // We don't really care about results\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToRefresh({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('controls__refresh')) {\n      return;\n    }\n\n    waitOnTodos(); // Show loading state\n    render({ state, appEl });\n    fetchTodos()\n    .then( todos => {\n      setTodos(todos);\n      render({ state, appEl });\n    })\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToToggleComplete({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('todo__toggle')) {\n      return;\n    }\n    const id = e.target.dataset.id;\n    // Here I elect not show a waiting status...what impact could that have?\n    fetchUpdateTodo(id, { done: !state.todos[id].done } )\n    .then( todo => { // Service call returns the updated todo\n      updateTodo({ id, todo });\n      render({ state, appEl });\n    })\n    .catch( err => {\n      console.log(err);\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToAddTodo({ state, appEl }) {\n  appEl.addEventListener('submit', (e) => {\n    if(!e.target.classList.contains('add__form')) {\n      return;\n    }\n    const task = appEl.querySelector('.add__task').value;\n    // Here I elect not show a waiting status...what impact could that have?\n    fetchAddTodo(task)\n    .then( todo => {\n      // Notice we get the id of the new todo from the returned todo\n      addTodo({ id: todo.id, todo });\n      render({ state, appEl });\n    })\n    .catch( err => {\n      console.log(err);\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToRemoveTodo({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('todo__delete')) {\n      return;\n    }\n    const id = e.target.dataset.id;\n    waitOnTodos(); // Show loading state\n    render({ state, appEl });\n    fetchDeleteTodo(id)\n      .then( () => {\n        return fetchTodos(); // Return the promise so we can chain\n      })\n      .then( todos => {\n        setTodos(todos);\n        render({ state, appEl });\n      })\n      .catch( err => {\n        setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n        render({ state, appEl });\n      });\n  });\n}\n\n","// Here we rebuild ALL the HTML whenever the state changes\n// That is not the most efficient way to do it\n// We COULD make these functions smarter about noticing what state changed\n// and what HTML is dependent on that state\n// and only replace the HTML that needs to be replaced\n// but we'll be moving to React soon where someone has already written that\n// The key part here is to see how the HTML is based on state\n// - at this stage, the \"action\" is not visible, only the state\n// - so our render is decoupled from the actions and events\n\nfunction render({ state, appEl }) {\n  const html = `\n   <main class=\"\">\n     ${ generateStatusHtml( state ) }\n     ${ generateLoginHtml( state ) }\n     ${ generateContentHtml( state ) }\n   </main>\n  `;\n  appEl.innerHTML = html;\n}\n\nfunction generateStatusHtml( state ) {\n  return `\n      <div class=\"status\">${state.error}</div>\n  `;\n}\n\nfunction generateLoginHtml( state ) {\n  if(state.isLoginPending) {\n    return `\n      <div class=\"login__waiting\">Loading user...</div>\n    `\n  }\n  if(state.isLoggedIn) {\n    return ``;\n  }\n\n  // The #/login below isn't \"real\" - the form should never navigate\n  // I included it merely as a hint to what the form does\n  return `\n      <div class=\"login\">\n        <form class=\"login__form\" action=\"#/login\">\n          <label>\n            <span>Username:</span>\n            <input class=\"login__username\" value=\"\">\n          </label>\n          <button class=\"login__button\" type=\"submit\">Login</button>\n        </form>\n      </div>\n  `;\n}\n\nfunction generateContentHtml( state ) {\n  if(!state.isLoggedIn) {\n    return ``;\n  }\n  if(state.isTodoPending) {\n    return `\n      <div class=\"content\">\n        ${generateControlsHtml( state )}\n        <div class=\"todos__waiting\">Loading Todos...</div>\n      </div>\n    `;\n  }\n  return `\n      <div class=\"content\">\n        ${generateControlsHtml( state )}\n        <ul class=\"todos\">${generateTodosHtml( state )}</ul>\n        ${generateAddTodoHtml( state )}\n      </div>\n  `;\n}\n\nfunction generateControlsHtml( state ) {\n  return `\n        <div class=\"controls\">\n          <button class=\"controls__refresh\">Refresh</button>\n          <button class=\"controls__logout\">Logout</button>\n        </div>\n  `;\n}\n\nfunction generateTodosHtml( state ) {\n  const todosHtml = Object.values(state.todos).map( todo => {\n    const isDoneClass = todo.done ? \"todo__text--complete\" : \"\";\n    const isAddedClass = state.lastAddedTodoId === todo.id ? \"todo__text--added\" : \"\";\n    return `\n      <li class=\"todo\">\n        <label\n        >\n          <input\n            class=\"todo__toggle\"\n            data-id=\"${todo.id}\"\n            type=\"checkbox\"\n            ${todo.done ? \"checked\" : \"\"}\n          >\n          <span\n            data-id=\"${todo.id}\"\n            class=\"todo__toggle todo__text ${ isDoneClass } ${isAddedClass} \"\n          >\n            ${todo.task}\n          </span>\n        </label>\n        <button\n          data-id=\"${todo.id}\"\n          class=\"todo__delete\"\n        >\n          &#10060;\n        </button>\n      </li>\n      `;\n  }).join('') || `<p>No Todo Items yet, add one!</p>`;\n  return todosHtml;\n}\n\nfunction generateAddTodoHtml( state ) {\n  return `\n        <form class=\"add__form\" action=\"#/add\">\n          <input class=\"add__task\">\n          <button type=\"submit\" class=\"add__button\">Add</button>\n        </form>\n  `;\n}\n\nexport default render;\n","// Each of these functions is a bit repetitive\n// We COULD write a function that they each use to reduce that\n// But\n// (1) While these services all use the same structure, not all services will\n// (2) I wanted to demonstrate what was happening rather than abstract it away\n//     so that you will be able to write a different way to handle different services\n//\n// Key lesson: These functions all handle:\n// - MAKING the service calls\n// - Passing the data\n// - Parsing the results\n//\n// But these functions DO NOT\n// - change the state\n// - change the DOM\n//\n// This makes these functions fully decoupled and reuseable\n//\n// Notice they each return a promise. This is essential.\n// It allows the caller to attach reactions in then() and catch() clauses\nexport function fetchAddTodo(task) {\n  return fetch('/api/todos', {\n    method: 'POST',\n    headers: new Headers({\n      'content-type': 'application/json',\n    }),\n    body: JSON.stringify( { task } ),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchDeleteTodo(id) {\n  return fetch(`/api/todos/${id}`, {\n    method: 'DELETE',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchUpdateTodo( id, todoUpdates ) {\n  return fetch(`/api/todos/${id}`, {\n    method: 'PATCH',\n    headers: new Headers({\n      'content-type': 'application/json',\n    }),\n    body: JSON.stringify( todoUpdates ),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchTodos() {\n  return fetch('/api/todos')\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchSession() {\n  return fetch('/api/session', {\n    method: 'GET',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchLogout() {\n  return fetch('/api/session', {\n    method: 'DELETE',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchLogin(username) {\n  return fetch('/api/session', {\n    method: 'POST',\n    headers: new Headers({\n      'content-type': 'application/json'\n    }),\n    body: JSON.stringify({ username }),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\n","import { MESSAGES } from './constants';\n\nconst state = {\n  // We store these as an object because we will access by id\n  todos: {},\n  isLoggedIn: false,\n  isLoginPending: true, // We start with our login status unknown\n  isTodoPending: false,\n  username: '',\n  lastAddedTodoId: '',\n  error: '',\n};\n\nexport function waitOnLogin() {\n  state.isLoggedIn = false;\n  state.isLoginPending = true;\n  state.username = '';\n  state.todos = {};\n  state.error = '';\n}\n\nexport function login(username) {\n  state.isLoggedIn = true;\n  state.isLoginPending = false;\n  state.username = username;\n  state.error = '';\n  state.lastAddedTodoId = '';\n}\n\nexport function logout() {\n  state.isLoggedIn = false;\n  state.isLoginPending = false;\n  state.username = '';\n  state.todos = {};\n  state.error = '';\n}\n\nexport function waitOnTodos() {\n  state.todos = {};\n  state.isTodoPending = true;\n  state.error = '';\n}\n\nexport function setTodos(todos) {\n  state.todos = todos;\n  state.isTodoPending = false;\n  state.error = '';\n  state.lastAddedTodoId = '';\n}\n\nexport function updateTodo({ id, todo }) {\n  state.todos[id] = todo;\n  state.error = '';\n  state.lastAddedTodoId = '';\n}\n\nexport function addTodo({ id, todo }) {\n  state.todos[id] = todo;\n  state.lastAddedTodoId = id;\n  state.error = '';\n}\n\nexport function setError(error) {\n  console.log(error);\n  if(!error) {\n    state.error = '';\n    return;\n  }\n  state.error = MESSAGES[error] || MESSAGES.default;\n}\n\nexport default state;\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { SERVER, CLIENT } from './constants';\nimport state, {\n  login,\n  waitOnTodos,\n  setTodos,\n  setError,\n} from './state';\nimport {\n  fetchAddTodo,\n  fetchDeleteTodo,\n  fetchUpdateTodo,\n  fetchTodos,\n  fetchSession,\n} from './services';\nimport render from './render';\nimport {\n  addAbilityToLogin,\n  addAbilityToLogout,\n  addAbilityToRefresh,\n  addAbilityToToggleComplete,\n  addAbilityToAddTodo,\n  addAbilityToRemoveTodo,\n} from './listeners';\n\n// Main code\n// This is where someone new to the code will see what happens on load\n// You want to make it easy to see the big picture\n// and easy to find the part you care about\n// - Why did you come here? To fix a bug? Add a feature?\n// - Make it easy to find the relevant code\n// - skimmable\n\nconst appEl = document.querySelector('#app');\nrender({ state, appEl });\naddAbilityToLogin({ state,  appEl });\naddAbilityToLogout({ state, appEl });\naddAbilityToRefresh({ state, appEl });\naddAbilityToToggleComplete({ state, appEl });\naddAbilityToAddTodo({ state, appEl });\naddAbilityToRemoveTodo({ state, appEl });\ncheckForSession();\n\n//////////\n\nfunction checkForSession() {\n  fetchSession()\n  .then( session => { // The returned object from the service call\n    login(session.username); // We do not have todos yet!\n    render({ state, appEl });            // Show we are logged in but don't have todos\n    return fetchTodos(); // By returning this promise we can chain the original promise\n  })\n  .catch( err => {\n    if( err?.error === SERVER.AUTH_MISSING ) {\n      return Promise.reject({ error: CLIENT.NO_SESSION }) // Expected, not a problem\n    }\n    return Promise.reject(err); // Pass any other error unchanged\n  })\n  .then( todos => {\n    setTodos(todos);\n    render({ state, appEl });\n  })\n  .catch( err => {\n    if( err?.error == CLIENT.NO_SESSION ) { // expected \"error\"\n      logout(); // No longer waiting, set to logged out case\n      render({ state, appEl });\n      return;\n    }\n    // For unexpected errors, report them\n    setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n    render({ state, appEl });\n  });\n}\n\n\n\n// addAbilityToLogin();\n// addAbilityToLogout();\n// addAbilityToRefresh();\n// addAbilityToToggleComplete();\n// addAbilityToAddTodo();\n// addAbilityToRemoveTodo();\n\n\n\n"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_TASK","TASK_MISSING","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","fetchLogin","fetchLogout","fetchTodos","fetchUpdateTodo","fetchAddTodo","fetchDeleteTodo","waitOnTodos","setTodos","setError","login","logout","updateTodo","addTodo","render","addAbilityToLogin","state","appEl","addEventListener","e","preventDefault","target","classList","contains","username","querySelector","value","then","todos","err","error","addAbilityToLogout","addAbilityToRefresh","addAbilityToToggleComplete","id","dataset","done","todo","console","log","addAbilityToAddTodo","task","addAbilityToRemoveTodo","html","generateStatusHtml","generateLoginHtml","generateContentHtml","innerHTML","isLoginPending","isLoggedIn","isTodoPending","generateControlsHtml","generateTodosHtml","generateAddTodoHtml","todosHtml","Object","values","map","isDoneClass","isAddedClass","lastAddedTodoId","join","fetch","method","headers","Headers","body","JSON","stringify","Promise","reject","response","ok","json","todoUpdates","fetchSession","waitOnLogin","document","checkForSession","session"],"sourceRoot":""}